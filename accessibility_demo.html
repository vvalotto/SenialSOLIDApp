<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - SSA-20 Accessibility Features</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
    <!-- Skip Links -->
    <a href="#main-content" class="skip-link position-absolute top-0 start-0 bg-primary text-white p-2 z-3 text-decoration-none" style="transform: translateY(-100%);">Saltar al contenido principal</a>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#"><strong>SSA-20</strong> Demo</a>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <nav aria-label="Breadcrumb" class="bg-light border-bottom">
        <div class="container">
            <ol class="breadcrumb py-2 mb-0">
                <li class="breadcrumb-item">
                    <a href="#" class="text-decoration-none">
                        <i class="bi bi-house-fill me-1" aria-hidden="true"></i>
                        <span class="visually-hidden">Ir a </span>Inicio
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    <i class="bi bi-gear me-1" aria-hidden="true"></i>
                    Demo Accesibilidad
                </li>
            </ol>
        </div>
    </nav>

    <main id="main-content" class="container my-4" tabindex="-1">
        <h1>Demostración de Funcionalidades de Accesibilidad SSA-20</h1>
        
        <div class="row g-4">
            <!-- Notification Demo -->
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h2 class="h5 mb-0">
                            <i class="bi bi-bell me-2"></i>
                            Sistema de Notificaciones
                        </h2>
                    </div>
                    <div class="card-body">
                        <p>Prueba las notificaciones toast accesibles:</p>
                        <div class="d-grid gap-2">
                            <button class="btn btn-success" onclick="showSuccessToast('Operación completada exitosamente')">
                                <i class="bi bi-check-circle me-2"></i>
                                Mostrar Éxito
                            </button>
                            <button class="btn btn-danger" onclick="showErrorToast('Error al procesar la solicitud', 'Error de Red')">
                                <i class="bi bi-exclamation-triangle me-2"></i>
                                Mostrar Error
                            </button>
                            <button class="btn btn-warning" onclick="showWarningToast('Revisa los datos antes de continuar')">
                                <i class="bi bi-exclamation-triangle me-2"></i>
                                Mostrar Advertencia
                            </button>
                            <button class="btn btn-info" onclick="showInfoToast('Nueva funcionalidad disponible')">
                                <i class="bi bi-info-circle me-2"></i>
                                Mostrar Info
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading Demo -->
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="card-header bg-warning">
                        <h2 class="h5 mb-0">
                            <i class="bi bi-hourglass me-2"></i>
                            Estados de Carga
                        </h2>
                    </div>
                    <div class="card-body">
                        <p>Prueba los indicadores de carga:</p>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" onclick="demoGlobalLoading()">
                                <i class="bi bi-globe me-2"></i>
                                Loading Global
                            </button>
                            <button class="btn btn-secondary" id="btn-loading-demo" onclick="demoButtonLoading()">
                                <i class="bi bi-cpu me-2"></i>
                                Loading Botón
                            </button>
                            <button class="btn btn-info" onclick="demoProgressBar()">
                                <i class="bi bi-bar-chart me-2"></i>
                                Barra de Progreso
                            </button>
                        </div>
                        
                        <!-- Progress container -->
                        <div id="progress-container" class="mt-3"></div>
                    </div>
                </div>
            </div>

            <!-- Form Demo -->
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h2 class="h5 mb-0">
                            <i class="bi bi-form me-2"></i>
                            Formulario Accesible
                        </h2>
                    </div>
                    <div class="card-body">
                        <form class="needs-validation" novalidate>
                            <fieldset>
                                <legend class="visually-hidden">Datos del usuario</legend>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="nombre" class="form-label">Nombre *</label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="nombre" 
                                               name="nombre"
                                               aria-describedby="nombre-help"
                                               required 
                                               minlength="2">
                                        <div id="nombre-help" class="form-text">
                                            <i class="bi bi-info-circle me-1"></i>
                                            Ingresa tu nombre completo (mínimo 2 caracteres)
                                        </div>
                                        <div class="invalid-feedback">
                                            Por favor ingresa un nombre válido
                                        </div>
                                        <div class="valid-feedback">
                                            ¡Nombre válido!
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email *</label>
                                        <input type="email" 
                                               class="form-control" 
                                               id="email" 
                                               name="email"
                                               aria-describedby="email-help"
                                               required>
                                        <div id="email-help" class="form-text">
                                            <i class="bi bi-envelope me-1"></i>
                                            Formato: usuario@dominio.com
                                        </div>
                                        <div class="invalid-feedback">
                                            Por favor ingresa un email válido
                                        </div>
                                        <div class="valid-feedback">
                                            ¡Email válido!
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-send me-2"></i>
                                        Enviar Formulario
                                    </button>
                                    <button type="reset" class="btn btn-outline-secondary ms-2">
                                        <i class="bi bi-arrow-clockwise me-2"></i>
                                        Limpiar
                                    </button>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Table Demo -->
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <h2 class="h5 mb-0">
                            <i class="bi bi-table me-2"></i>
                            Tabla Accesible
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-hover" 
                                   role="table" 
                                   aria-label="Lista de usuarios del sistema">
                                <caption class="visually-hidden">
                                    Tabla con información de 3 usuarios registrados en el sistema
                                </caption>
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col" tabindex="0" aria-sort="none">
                                            <i class="bi bi-person me-2"></i>
                                            Nombre
                                            <i class="bi bi-arrow-down-up text-muted ms-2"></i>
                                        </th>
                                        <th scope="col" tabindex="0" aria-sort="none">
                                            <i class="bi bi-envelope me-2"></i>
                                            Email
                                            <i class="bi bi-arrow-down-up text-muted ms-2"></i>
                                        </th>
                                        <th scope="col">
                                            <i class="bi bi-calendar me-2"></i>
                                            Estado
                                        </th>
                                        <th scope="col">
                                            <i class="bi bi-gear me-2"></i>
                                            Acciones
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Juan Pérez</td>
                                        <td>juan@example.com</td>
                                        <td><span class="badge bg-success">Activo</span></td>
                                        <td>
                                            <div class="btn-group btn-group-sm" role="group" aria-label="Acciones para Juan Pérez">
                                                <button class="btn btn-outline-primary" title="Ver perfil de Juan">
                                                    <i class="bi bi-eye"></i>
                                                    <span class="visually-hidden">Ver Juan Pérez</span>
                                                </button>
                                                <button class="btn btn-outline-warning" title="Editar perfil de Juan">
                                                    <i class="bi bi-pencil"></i>
                                                    <span class="visually-hidden">Editar Juan Pérez</span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>María García</td>
                                        <td>maria@example.com</td>
                                        <td><span class="badge bg-warning text-dark">Pendiente</span></td>
                                        <td>
                                            <div class="btn-group btn-group-sm" role="group" aria-label="Acciones para María García">
                                                <button class="btn btn-outline-primary" title="Ver perfil de María">
                                                    <i class="bi bi-eye"></i>
                                                    <span class="visually-hidden">Ver María García</span>
                                                </button>
                                                <button class="btn btn-outline-warning" title="Editar perfil de María">
                                                    <i class="bi bi-pencil"></i>
                                                    <span class="visually-hidden">Editar María García</span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Carlos López</td>
                                        <td>carlos@example.com</td>
                                        <td><span class="badge bg-danger">Inactivo</span></td>
                                        <td>
                                            <div class="btn-group btn-group-sm" role="group" aria-label="Acciones para Carlos López">
                                                <button class="btn btn-outline-primary" title="Ver perfil de Carlos">
                                                    <i class="bi bi-eye"></i>
                                                    <span class="visually-hidden">Ver Carlos López</span>
                                                </button>
                                                <button class="btn btn-outline-success" title="Activar cuenta de Carlos">
                                                    <i class="bi bi-check-circle"></i>
                                                    <span class="visually-hidden">Activar Carlos López</span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast container -->
    <div id="toast-container" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;"></div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="position-fixed top-0 start-0 w-100 h-100 d-none align-items-center justify-content-center" 
         style="background: rgba(255,255,255,0.9); z-index: 1060;">
        <div class="text-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;"></div>
            <div class="mt-3 text-primary fw-bold">Cargando...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Skip link functionality
        document.querySelector('.skip-link').addEventListener('focus', function() {
            this.style.transform = 'translateY(0)';
        });
        document.querySelector('.skip-link').addEventListener('blur', function() {
            this.style.transform = 'translateY(-100%)';
        });

        // Toast functions
        function showToast(message, type = 'info', title = null) {
            const toastContainer = document.getElementById('toast-container');
            const toastId = 'toast-' + Date.now();
            
            const icons = {
                'success': 'bi-check-circle',
                'error': 'bi-exclamation-triangle',
                'warning': 'bi-exclamation-triangle',
                'info': 'bi-info-circle'
            };
            
            const titles = {
                'success': title || 'Éxito',
                'error': title || 'Error',
                'warning': title || 'Advertencia',
                'info': title || 'Información'
            };
            
            const bgColors = {
                'success': 'bg-success',
                'error': 'bg-danger',
                'warning': 'bg-warning',
                'info': 'bg-info'
            };
            
            const toastHtml = `
                <div id="${toastId}" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header ${bgColors[type]} text-white">
                        <i class="bi ${icons[type]} me-2"></i>
                        <strong class="me-auto">${titles[type]}</strong>
                        <small>ahora</small>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Cerrar"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('beforeend', toastHtml);
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
            
            toastElement.addEventListener('hidden.bs.toast', function() {
                this.remove();
            });
        }
        
        window.showSuccessToast = (msg, title) => showToast(msg, 'success', title);
        window.showErrorToast = (msg, title) => showToast(msg, 'error', title);
        window.showWarningToast = (msg, title) => showToast(msg, 'warning', title);
        window.showInfoToast = (msg, title) => showToast(msg, 'info', title);

        // Loading demos
        function demoGlobalLoading() {
            const overlay = document.getElementById('loading-overlay');
            overlay.classList.remove('d-none');
            overlay.classList.add('d-flex');
            
            setTimeout(() => {
                overlay.classList.add('d-none');
                overlay.classList.remove('d-flex');
                showSuccessToast('Carga completada exitosamente');
            }, 3000);
        }

        function demoButtonLoading() {
            const btn = document.getElementById('btn-loading-demo');
            const originalContent = btn.innerHTML;
            
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Cargando...';
            btn.setAttribute('aria-busy', 'true');
            
            setTimeout(() => {
                btn.disabled = false;
                btn.innerHTML = originalContent;
                btn.setAttribute('aria-busy', 'false');
                showSuccessToast('Operación completada');
            }, 2000);
        }

        function demoProgressBar() {
            const container = document.getElementById('progress-container');
            const progressId = 'demo-progress-' + Date.now();
            
            container.innerHTML = `
                <div id="${progressId}" class="mt-3">
                    <div class="d-flex justify-content-between mb-1">
                        <small class="text-muted">Procesando archivo...</small>
                        <small class="text-muted">0%</small>
                    </div>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%" 
                             aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                        </div>
                    </div>
                </div>
            `;
            
            let percent = 0;
            const interval = setInterval(() => {
                percent += 10;
                const progressElement = document.querySelector(`#${progressId} .progress-bar`);
                const percentageElement = document.querySelector(`#${progressId} .text-muted:last-child`);
                const messageElement = document.querySelector(`#${progressId} .text-muted:first-child`);
                
                progressElement.style.width = percent + '%';
                progressElement.setAttribute('aria-valuenow', percent);
                percentageElement.textContent = percent + '%';
                
                if (percent === 50) {
                    messageElement.textContent = 'Validando datos...';
                } else if (percent === 80) {
                    messageElement.textContent = 'Finalizando...';
                }
                
                if (percent >= 100) {
                    clearInterval(interval);
                    messageElement.textContent = 'Completado';
                    progressElement.classList.add('bg-success');
                    setTimeout(() => {
                        container.innerHTML = '';
                        showSuccessToast('Archivo procesado correctamente');
                    }, 1000);
                }
            }, 500);
        }

        // Form validation
        (function() {
            'use strict';
            window.addEventListener('load', function() {
                var forms = document.getElementsByClassName('needs-validation');
                
                var validation = Array.prototype.filter.call(forms, function(form) {
                    form.addEventListener('submit', function(event) {
                        event.preventDefault();
                        if (form.checkValidity() === false) {
                            event.stopPropagation();
                            showErrorToast('Por favor corrige los errores en el formulario');
                        } else {
                            showSuccessToast('Formulario enviado correctamente');
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();

        // Focus management
        document.addEventListener('DOMContentLoaded', function() {
            // Focus first form input
            const firstInput = document.querySelector('input[type="text"]');
            if (firstInput) {
                firstInput.focus();
            }
            
            // Enhanced focus indicators
            document.querySelectorAll('button, input, select, textarea, a[href], [tabindex]').forEach(element => {
                element.addEventListener('focus', function() {
                    this.style.outline = '2px solid #0d6efd';
                    this.style.outlineOffset = '2px';
                });
                
                element.addEventListener('blur', function() {
                    this.style.outline = '';
                    this.style.outlineOffset = '';
                });
            });
        });
    </script>
</body>
</html>
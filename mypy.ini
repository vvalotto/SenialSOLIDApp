[mypy]
# Global options
python_version = 3.11
platform = darwin

# Import discovery
mypy_path = .
packages = aplicacion, dominio, infraestructura, presentacion, config
namespace_packages = True
explicit_package_bases = True

# Disallow dynamic typing
disallow_any_unimported = False
disallow_any_expr = False
disallow_any_decorated = False
disallow_any_explicit = False
disallow_any_generics = False
disallow_subclassing_any = False

# Untyped definitions and calls
disallow_untyped_calls = False
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True
disallow_untyped_decorators = False

# None and Optional handling
no_implicit_optional = True
strict_optional = True

# Configuring warnings
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_return_any = True
warn_unreachable = True

# Suppressing errors
ignore_missing_imports = True
follow_imports = silent
follow_imports_for_stubs = True

# Configuring error messages
show_error_codes = True
show_error_context = True
show_column_numbers = True
show_traceback = True
pretty = True
color_output = True
error_summary = True

# Miscellaneous strictness flags
allow_untyped_globals = True
allow_redefinition = True
local_partial_types = True
implicit_reexport = True
strict_equality = True

# Advanced options
cache_dir = .mypy_cache
sqlite_cache = True
cache_fine_grained = True
skip_version_check = False
skip_cache_mtime_checks = False

# =============================================================================
# PER-MODULE OPTIONS - GRADUAL TYPING APPROACH
# =============================================================================

# Core domain modules - strictest typing
[mypy-dominio.modelo.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_calls = True
disallow_any_generics = True
warn_return_any = True
no_implicit_optional = True

[mypy-dominio.repositorios.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_calls = False
warn_return_any = True

[mypy-dominio.exceptions.*]
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_calls = True

# Application layer - moderate typing
[mypy-aplicacion.validation.*]
disallow_untyped_defs = True
disallow_incomplete_defs = False
disallow_untyped_calls = False

[mypy-aplicacion.patterns.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True

[mypy-aplicacion.managers.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True

# Infrastructure layer - relaxed typing (external dependencies)
[mypy-infraestructura.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True
ignore_missing_imports = True

# Presentation layer - relaxed typing (Flask integration)
[mypy-presentacion.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = False
ignore_missing_imports = True

# Configuration modules
[mypy-config.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
ignore_missing_imports = True

# Test modules - very relaxed
[mypy-tests.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
disallow_untyped_calls = False
check_untyped_defs = False
ignore_missing_imports = True
ignore_errors = False

[mypy-test_*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
ignore_errors = False

# Demo and script files
[mypy-demo_*]
ignore_errors = True

[mypy-run_*]
ignore_errors = True

[mypy-functional_test]
ignore_errors = True

# Documentation
[mypy-docs.*]
ignore_errors = True

# Build and deployment
[mypy-build.*]
ignore_errors = True

[mypy-deploy.*]
ignore_errors = True

# =============================================================================
# THIRD-PARTY LIBRARY STUBS
# =============================================================================

# Flask and extensions
[mypy-flask.*]
ignore_missing_imports = True

[mypy-flask_sqlalchemy.*]
ignore_missing_imports = True

[mypy-flask_wtf.*]
ignore_missing_imports = True

[mypy-flask_bootstrap.*]
ignore_missing_imports = True

[mypy-flask_moment.*]
ignore_missing_imports = True

# WTForms
[mypy-wtforms.*]
ignore_missing_imports = True

# SQLAlchemy
[mypy-sqlalchemy.*]
ignore_missing_imports = True

# Testing libraries
[mypy-pytest.*]
ignore_missing_imports = True

[mypy-pytest_cov.*]
ignore_missing_imports = True

[mypy-pytest_mock.*]
ignore_missing_imports = True

[mypy-pytest_flask.*]
ignore_missing_imports = True

[mypy-hypothesis.*]
ignore_missing_imports = True

[mypy-faker.*]
ignore_missing_imports = True

# Validation libraries
[mypy-cerberus.*]
ignore_missing_imports = True

[mypy-jsonschema.*]
ignore_missing_imports = True

[mypy-validators.*]
ignore_missing_imports = True

# Security libraries
[mypy-bleach.*]
ignore_missing_imports = True

[mypy-defusedxml.*]
ignore_missing_imports = True

[mypy-magic.*]
ignore_missing_imports = True

# Utility libraries
[mypy-yaml.*]
ignore_missing_imports = True

[mypy-click.*]
ignore_missing_imports = True

[mypy-structlog.*]
ignore_missing_imports = True

[mypy-psutil.*]
ignore_missing_imports = True

# Development tools
[mypy-black.*]
ignore_missing_imports = True

[mypy-isort.*]
ignore_missing_imports = True

[mypy-flake8.*]
ignore_missing_imports = True

[mypy-pylint.*]
ignore_missing_imports = True

[mypy-bandit.*]
ignore_missing_imports = True

[mypy-safety.*]
ignore_missing_imports = True

[mypy-pre_commit.*]
ignore_missing_imports = True

[mypy-radon.*]
ignore_missing_imports = True

[mypy-coverage.*]
ignore_missing_imports = True

# =============================================================================
# GRADUAL TYPING MIGRATION PLAN
# =============================================================================
# Phase 1 (Current): Basic type checking with relaxed rules
# Phase 2 (Sprint 4): Strict typing for domain layer
# Phase 3 (Sprint 5): Moderate typing for application layer
# Phase 4 (Sprint 6): Complete typing coverage
#
# To upgrade to next phase, progressively change:
# - disallow_untyped_defs = False -> True
# - disallow_incomplete_defs = False -> True
# - disallow_untyped_calls = False -> True
# =============================================================================